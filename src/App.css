/* ==========================================================================
   0) TOKENS / VARIABLES GLOBALES
   ========================================================================== */
:root{
  /* Sidebar */
  --sb-bg:#176d72;
  --sb-bg-2:#1e7e83;
  --sb-pill:rgba(255,255,255,0.12);
  --sb-hover:rgba(255,255,255,0.08);
  --sb-text:#eaf6f6;
  --sb-muted:#bfe4e4;
  --sb-shadow:0 10px 30px rgba(0,0,0,.15);

  /* Header / superficie general (ajústalos a tu tema) */
  --surface:#0d1117;
  --ink:#e5eef9;
  --muted:#9fb0c7;
  --border:#1f2a36;
  --field-bg:#0f141a;
  --primary:#3b82f6;
  --primary-ink:#fff;
  --ring:rgba(59,130,246,.25);

  /* Layout */
  --page-pad:16px;
  --radius:16px;
  --radius-3xl:28px;

  /* Dimensiones del sidebar (para colapsado) */
  --sb-w-open: 280px;
  --sb-w-closed: 72px;
}

/* Fondo de página (opcional) */
.layout{
  min-height:100dvh;
  background:#8dc2c5;
}

/* ==========================================================================
   1) LAYOUT CON SIDEBAR (GRID) + CONTENIDO
   ========================================================================== */

/* Grid principal con dos columnas: sidebar + contenido */
.layout--withSidebar{
  display:grid;
  grid-template-columns: var(--sb-w, var(--sb-w-open)) minmax(0, 1fr) !important;
  grid-template-rows:1fr;
  grid-template-areas:"sidebar content";
  gap:16px;
  padding:16px;
  min-height:0;
  align-items:stretch;
  transition: grid-template-columns .22s ease;
}

/* Estado colapsado (aplica en el nodo .layout--withSidebar) */
.layout--withSidebar.is-collapsed{
  --sb-w: var(--sb-w-closed);
}

/* Área de contenido: ocupa todo, sin centrar (stretched) */
.content--withSidebar{
  grid-area: content;
  display: grid;
  place-items: stretch;
  min-height: 0;
  min-width: 0;
}

/* Viewport contenedor de páginas (evita shrink) */
.page-viewport{
  width: 100%;
  min-height:calc(100dvh - 32px);
  display:grid;
  place-items: stretch;
  min-width: 0;
}

/* Componente de página: ocupa 100% y permite scroll interno */
.page{
  width: 100%;
  height: 100%;
  display: grid;
  place-items: stretch;     /* ya NO centramos aquí */
  min-width: 0;
  min-height: 0;
  overflow: auto;           /* scroll si el contenido lo requiere */
}

/* Los hijos directos de .page deben ocupar todo el panel */
.page > *{
  width: 100% !important;
  height: 100% !important;
  min-width: 0 !important;
  min-height: 0 !important;
}

/* Limpieza de wrappers antiguos que limitaban ancho/centraban */
.content__inner, .center-all{
  width: 100% !important;
  max-width: none !important;
  justify-self: stretch !important;
  align-self: stretch !important;
}
.center-all > *{ place-items:center; }

/* Inputs estándar del layout (si los usas dentro del contenido) */
.content--withSidebar input, .content--withSidebar select, .content--withSidebar textarea{
  background:#ffffff;
  border:1px solid #e6eef0;
  border-radius:12px;
}

/* ==========================================================================
   2) SIDEBAR (VISUAL, SCROLL Y ESTADOS)
   ========================================================================== */

.sidebar{
  grid-area:sidebar;
  display:flex;
  flex-direction:column;
  background:var(--sb-bg);
  border-radius:var(--radius-3xl);
  box-shadow:var(--sb-shadow);
  color:var(--sb-text);
  padding:14px;
  padding-bottom: 5px;
  position:sticky;
  top:var(--page-pad);
  height:calc(100dvh - (var(--page-pad) * 2));
  transition: padding .22s ease;            /* suaviza al colapsar */
}

/* Header del sidebar: marca + botón de toggle */
.sidebar__header{
  display: grid;
  grid-template-columns: 1fr auto; 
  align-items: center;
  gap: 8px;
  font-weight:700;
  letter-spacing:.3px;
  opacity:.9;
  padding:8px 10px 14px 10px;
}

/* Marca */
.sb-brand{
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 0;
}
.sb-logo{ font-size: 18px; }
.sb-title{
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  color: var(--sb-text);
  opacity: .9;
}
.sb-subtitle{
  font-size: 12px;
  line-height: 1.25;
  font-weight: 500;
  color: var(--sb-text, #94a3b8);
  opacity: .8;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Nav del sidebar con scroll fino */
.sidebar__nav{
  overflow:auto;
  padding:4px;
  flex:1;
  scrollbar-width:thin;
  scrollbar-color:var(--sb-hover) transparent;
}
.sidebar__nav::-webkit-scrollbar{ width:8px; }
.sidebar__nav::-webkit-scrollbar-thumb{
  background:var(--sb-hover);
  border-radius:999px;
}

/* Lista de items */
.sb-ul{ list-style:none; margin:0; padding:0; }
.sb-li + .sb-li{ margin-top:2px; }

/* Item base */
.sideItem{
  width:100%;
  display:flex; align-items:center; gap:10px;
  padding:12px 12px;
  border:0; background:transparent; color:var(--sb-text);
  border-radius:14px; cursor:pointer;
  transition:background .2s ease, transform .04s ease;
  text-align:left;
}
.sideItem:hover{ background:var(--sb-hover); }
.sideItem:active{ transform:translateY(1px); }
.sideItem--leaf{ position:relative; }

/* Icono y label del item */
.sideItem__icon{ width:22px; display:inline-flex; justify-content:center; opacity:.92; }
.sideItem__label{ font-size:15px; }
.sideItem--folder{ font-weight:600; }

/* Estado activo */
.sideItem--active{
  background:var(--sb-pill);
  outline:2px solid rgba(255,255,255,0.08);
}

/* Caret para items con hijos */
.caret{ margin-right:6px; opacity:.8; transition:transform .2s ease; }
.caret.rot{ transform:rotate(90deg); }

/* Footer del sidebar (usuario) */
.sidebar__footer{
  background:rgba(255,255,255,0.06);
  border-radius:14px;
  padding:10px 12px;
  display:flex; align-items:center; gap:10px;
  color:var(--sb-muted);
}
.sb-prof__avatar{
  width:28px; height:28px; border-radius:999px;
  background:var(--sb-bg-2); display:grid; place-items:center;
  font-weight:800; color:white;
}
.sb-prof__info{ display:grid; }
.sb-prof__name{ font-weight:700; color:var(--sb-text); font-size:14px; }
.sb-prof__mail{ font-size:12px; opacity:.9; }

/* Iconos compactos (por si mezclas SVG/emoji) */
.sb-icon-wrap{
  display:inline-flex; align-items:center; justify-content:center;
  width: 1.75rem; height: 1.75rem; margin-right:.5rem; flex-shrink:0;
}
.sb-icon{ width:1.25rem; height:1.25rem; } /* SVG */
.sb-emoji{ font-size:1.1rem; line-height:1; } /* emoji */

/* --------- Sidebar: modo colapsado --------- */
.layout--withSidebar.is-collapsed .sidebar{ padding-left:10px; padding-right:10px; }
.layout--withSidebar.is-collapsed .sideItem{
  gap:0; padding-left:10px; padding-right:10px; justify-content:center;
}
.layout--withSidebar.is-collapsed .sideItem__label,
.layout--withSidebar.is-collapsed .sidebar__header .sb-title,
.layout--withSidebar.is-collapsed .sb-prof__info,
.layout--withSidebar.is-collapsed .caret{
  display:none !important;
}
.layout--withSidebar.is-collapsed .sb-icon-wrap{ margin-right:0; }
.layout--withSidebar.is-collapsed .sidebar__footer{
  justify-content:center; padding-left:8px; padding-right:8px;
}

/* Botón toggle del sidebar */
.sb-toggle{
  border:0;
  background:var(--sb-pill);
  color:var(--sb-text);
  padding:8px 10px;
  border-radius:10px;
  cursor:pointer;
  box-shadow:var(--sb-shadow);
  transition: transform .06s ease, background .2s ease;
}
.sb-toggle:hover{ background: var(--sb-hover); }
.sb-toggle:active{ transform: translateY(1px); }

/* ==========================================================================
   3) HEADER (FONDO FULL-BLEED + CONTENIDO CENTRADO)
   ========================================================================== */

.headerRow{
  background: var(--surface);
  border-bottom: 1px solid var(--border);
  padding-block: 12px;
  padding-inline: 16px;
  height: 20px;
}

/* contenedor interno centrado con ancho máximo */
.header-inner{
  width: min(100%, var(--content-max));
  margin-inline: auto;           
  display: grid;
  grid-template-columns: 1fr auto;
  align-items: center;
  gap: 16px;
  height: 20px;
}

/* Marca / título */
.brand{
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 0;
}
.brand h1{
  margin: 0;
  font-size: 18px;
  font-weight: 800;
  line-height: 1.1;
  color: var(--ink);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Cluster de usuario (derecha) */
.userCluster{
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: max-content;
  align-items: center;
  gap: 12px;
}
.avatar{
  width: 36px; height: 36px; border-radius: 999px;
  background: var(--field-bg); color: var(--ink);
  border: 1px solid var(--border);
  display: grid; place-items: center; font-weight: 700;
}
.userInfo{
  display: grid; align-content: center; line-height: 1.15;
}
.userName{ font-weight: 700; font-size: 14px; color: var(--ink); }
.userMail{ font-size: 12px; color: var(--muted); }

/* Botón primario (login/logout) */
.btn-logout{
  appearance: none;
  border: 1px solid var(--primary);
  background: var(--primary);
  color: var(--primary-ink);
  padding: 8px 12px;
  border-radius: calc(var(--radius) - 8px);
  font-weight: 600;
  cursor: pointer;
  transition: transform .06s ease, box-shadow .15s ease, opacity .15s ease;
}
.btn-logout:hover{ box-shadow: 0 0 0 4px var(--ring); }
.btn-logout:active{ transform: translateY(1px); }
.btn-logout:disabled, .btn-logout[aria-busy="true"]{
  opacity: .6; cursor: default; box-shadow: none;
}

/* Header sticky opcional */
.headerRow.is-sticky{
  position: sticky; top: 0; z-index: 40;
}

/* ==========================================================================
   4) RESPONSIVE
   ========================================================================== */

@media (max-width:960px){
  /* Sidebar arriba, contenido abajo */
  .layout--withSidebar{
    grid-template-columns:1fr;
    grid-template-rows:auto 1fr;
    grid-template-areas:
      "sidebar"
      "content";
  }
  .sidebar{ position:relative; top:auto; height:auto; }
  .page-viewport{ min-height:calc(100dvh - var(--page-pad)); }
}

@media (max-width: 640px){
  /* Header compacto */
  .headerRow{
    padding-block:10px;
    padding-inline:12px;
  }
  .header-inner{
    grid-template-columns: 1fr;
    gap: 8px;
  }
  .brand h1{ font-size: 16px; }
  .btn-logout{ padding: 6px 10px; }
}
