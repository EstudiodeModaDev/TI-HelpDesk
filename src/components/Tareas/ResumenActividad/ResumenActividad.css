/* =========================================================
   ACTIVITY STATUS CARD (as-card) — responsive + tokens app
   ========================================================= */
.as-card{
  /* Tokens locales (con fallbacks a los globales) */
  --as-bg:        var(--surface, #fff);
  --as-ink:       var(--ink, #0f172a);
  --as-muted:     var(--muted, #64748b);
  --as-bd:        var(--bd, #e5e7eb);
  --as-bd-strong: var(--bd-strong, #d1d5db);
  --as-shadow:    var(--shadow, 0 8px 22px rgba(0,0,0,.06));
  --as-radius:    var(--radius-3xl, var(--radius, 12px));
  --as-primary:   var(--primary, #3b82f6);
  --as-ring:      var(--ring, rgba(59,130,246,.25));

  /* Acento opcional por prop style={{ --as-accent }} */
  --as-accent:    var(--as-accent, var(--as-primary));

  /* Dimensiones fluidas */
  --as-pad:       clamp(12px, 2.2vw, 18px);
  --as-gap:       clamp(8px, 1.8vw, 14px);
  --as-title:     clamp(1rem, 2.4vw, 1.25rem);
  --as-sub:       clamp(.9rem, 2vw, 1rem);

  /* Tamaño del anillo fluido (se adapta al ancho disponible) */
  --as-ring-size: clamp(120px, 26vw, 180px);
  --as-stroke:    10;                         /* grosor SVG, el TSX pasa strokeWidth={stroke} */
  --as-center-gap: clamp(6px, 1.4vw, 8px);

  display: grid;
  gap: var(--as-gap);
  padding: var(--as-pad);
  background: var(--as-bg);
  color: var(--as-ink);
  border: 1px solid var(--as-bd);
  border-radius: var(--as-radius);
  box-shadow: var(--as-shadow);      /* compacto por defecto */
  container-type: inline-size; /* permite container queries */
    inline-size: clamp(320px, 90vw, 720px);
  margin-inline: auto;
}

/* Título */
.as-title{
  margin: 0;
  font-size: var(--as-title);
  font-weight: 800;
  letter-spacing: -.015em;
  color: var(--as-ink);
}

/* ====== Ring de progreso ====== */
.as-ring{
  position: relative;
  width: var(--as-ring-size);
  height: var(--as-ring-size);
  display: grid;
  place-items: center;
  margin-inline: auto;   /* centra el anillo en cards angostas */
}

.as-ring-svg{
  width: 100%;
  height: 100%;
  display: block;
  transform: rotate(-90deg); /* progreso inicia arriba */
}

/* Pista */
.as-ring-track{
  fill: none;
  stroke: color-mix(in oklab, var(--as-ink) 10%, transparent);
  opacity: .4;
}

/* Progreso */
.as-ring-progress{
  fill: none;
  stroke: var(--as-accent);
  stroke-linecap: round;
  transition: stroke-dashoffset .4s ease;
}

/* Centro del anillo */
.as-ring-center{
  position: absolute;
  display: flex;                 /* en vez de grid */
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2px;                      /* antes era mayor */
  transform: translateY(-2px)
}
.as-ring-value{
  font-size: clamp(1.5rem, 5.6vw, 1.9rem);
  line-height: .9;               /* reduce espacio vertical interno */
  margin-bottom: -2px;           /* cierra la separación con el % */
  font-variant-numeric: tabular-nums;

}
.as-ring-unit{
  margin-top: var(--as-center-gap);
  font-size: clamp(.75rem, 2.2vw, .85rem);
  font-weight: 700;
  color: var(--as-muted);
}

/* ====== Sección: próximas tareas ====== */
.as-section{
  display: grid;
  gap: calc(var(--as-gap) - 2px);
}
.as-subtitle{
  margin: 0;
  font-size: var(--as-sub);
  font-weight: 800;
  color: var(--as-ink);
}

.as-tasklist{
  list-style: none;
  margin: 0;
  padding: 0;
  display: grid;
  gap: 8px;
}
.as-task{
  display: grid;
  grid-template-columns: 1fr max-content;
  gap: 8px 12px;
  align-items: center;
  padding: 10px 12px;
  border: 1px solid var(--as-bd);
  border-radius: calc(var(--as-radius) - 4px);
  background: color-mix(in oklab, var(--as-bg) 96%, transparent);
}
.as-task-title{
  min-width: 0;
  font-weight: 700;
  color: var(--as-ink);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.as-task-date{
  display: inline-flex;
  align-items: baseline;
  gap: 6px;
  font-variant-numeric: tabular-nums;
  color: var(--as-muted);
}
.as-task-day{
  font-weight: 900;
  font-size: 1.05em;
  color: var(--as-ink);
}
.as-task-rest{
  opacity: .9;
}

/* ====== Footer ====== */
.as-footer{
  display: flex;
  align-items: center;
  gap: 8px;
  padding-top: 6px;
  border-top: 1px solid var(--as-bd);
  color: var(--as-muted);
}
.as-footer-value{
  font-size: clamp(1.1rem, 3vw, 1.25rem);
  color: var(--as-ink);
  font-weight: 900;
  line-height: 1;
}
.as-footer-text{
  font-weight: 600;
}

/* =======================
   RESPONSIVE / ADAPTATIVO
   ======================= */

/* Si el contenedor es ancho, permite que el anillo y la lista respiren */
@container (min-width: 520px){
  .as-card{
    max-width: 560px; /* puede crecer un poco cuando hay espacio */
  }
}

/* En cards MUY angostas, compactamos paddings y tipografía */
@container (max-width: 360px){
  .as-card{ --as-pad: 10px; --as-gap: 6px; }
  .as-task{ padding: 8px 10px; }
  .as-tasklist{ gap: 6px; }
}

/* Cuando estés en layouts de 3 columnas, el card encoge sin romper nada.
   Si lo usas dentro de un grid auto-fit, esto ayuda a remapear el ring. */
@media (max-width: 820px){
  .as-card{ --as-ring-size: clamp(110px, 34vw, 160px); }
}
@media (max-width: 520px){
  .as-card{ --as-ring-size: clamp(96px, 42vw, 140px); }
}

/* Estado hover/foco suave en items */
.as-task:hover{
  border-color: var(--as-bd-strong);
  box-shadow: 0 0 0 4px var(--as-ring);
}

/* Accesibilidad: reduce animaciones si aplica */
@media (prefers-reduced-motion: reduce){
  .as-ring-progress{ transition: none; }
  .as-task{ transition: none; }
}
