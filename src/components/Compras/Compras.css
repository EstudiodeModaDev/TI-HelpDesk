/* =========================
   0) TOKENS / THEMING
   ========================= */

/* Por defecto: claro */
:root{
  --bg: #f6f8fc;
  --surface: #ffffff;
  --ink: #0f172a;
  --muted: #64748b;
  --border: #d1d5db;
  --shadow: 0 10px 28px rgba(2,6,23,.08);

  --primary: #2563eb;
  --primary-ink: #ffffff;

  --success: #16a34a;
  --warning: #d97706;
  --danger:  #b91c1c;

  --radius: 14px;
  --gap: 14px;
  --pad: 16px;
  --font: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

/* Oscuro (habilita con .theme-dark en body o en un contenedor ancestro) */
.theme-dark{
  --bg: #f6f8fc;
  --surface: #ffffff;
  --ink: #0f172a;
  --muted: #64748b;
  --border: #d1d5db;
  --shadow: 0 10px 28px rgba(2,6,23,.08);

  --primary: #2563eb;
  --primary-ink: #ffffff;

  --success: #16a34a;
  --warning: #d97706;
  --danger:  #b91c1c;

  --radius: 14px;
  --gap: 14px;
  --pad: 16px;
  --font: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

.force-light, .force-light * { 
  /* Reinyecta variables del tema claro cuando el ancestro sea oscuro */
  --bg: #f6f8fc;
  --surface: #ffffff;
  --ink: #0f172a;
  --muted: #64748b;
  --border: #d1d5db;
  --shadow: 0 10px 28px rgba(2,6,23,.08);
  --primary: #2563eb;
  --primary-ink: #ffffff;
  --success: #16a34a;
  --warning: #d97706;
  --danger:  #b91c1c;
  --radius: 14px;
  --gap: 14px;
  --pad: 16px;
  --font: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

.force-dark, .force-dark * {
  --bg: #0f141a;
  --surface: #131a22;
  --ink: #e5eef9;
  --muted: #9fb0c7;
  --border: #1f2a36;
  --shadow: 0 10px 28px rgba(0,0,0,.35);
  --primary: #3b82f6;
  --primary-ink: #0b1220;
  --success: #22c55e;
  --warning: #f59e0b;
  --danger:  #ef4444;
  --radius: 14px;
  --gap: 14px;
  --pad: 16px;
  --font: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

/* =========================
   1) LAYOUT / CONTENEDOR
   ========================= */

.compra-wrap{
  font-family: var(--font);
  color: var(--ink);
  background: transparent;
  padding: var(--pad);
  display: grid;
  gap: var(--gap);
  max-width: 1180px
}

/* Secciones con misma “card” base */
#compras-form, #compras-tabla{
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: clamp(12px, 1.8vw, 20px);
  transition: background .2s ease, border-color .2s ease, color .2s ease;
}

/* SR-only si no lo tienes aún */
.sr-only{
  position:absolute!important; width:1px; height:1px;
  padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
}

/* =========================
   2) TOOLBAR / BOTONES (opcionales)
   ========================= */

.btn{
  appearance: none;
  border: 1px solid var(--border);
  background: var(--surface);
  color: var(--ink);
  border-radius: 10px;
  padding: 8px 12px;
  font-size: 0.95rem;
  line-height: 1;
  cursor: pointer;
  transition: transform .06s ease, background .15s ease, border-color .15s ease;
}
.btn:hover{ background: color-mix(in srgb, var(--surface) 88%, var(--ink) 12%); }
.btn:active{ transform: translateY(1px); }

.btn-primary{
  background: var(--primary);
  color: var(--primary-ink);
  border-color: color-mix(in srgb, var(--primary) 70%, #000 30%);
}
.btn-primary:hover{
  background: color-mix(in srgb, var(--primary) 86%, #fff 14%);
}

/* Etiquetas y campos genéricos del formulario dentro del card */
.form-grid{
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  gap: 12px;
}
.form-item{
  grid-column: span 6;
  display: grid;
  grid-template-columns: 140px 1fr;
  align-items: center;
  gap: 8px;
}
.form-item label{
  color: var(--muted);
  font-size: .9rem;
}
.form-item input,
.form-item select,
.form-item textarea{
  width: 100%;
  padding: 10px 12px;
  border: 1px solid var(--border);
  border-radius: 10px;
  background: color-mix(in srgb, var(--surface) 96%, var(--ink) 4%);
  color: var(--ink);
  outline: none;
}
.form-item input:focus,
.form-item select:focus,
.form-item textarea:focus{
  border-color: color-mix(in srgb, var(--primary) 60%, var(--border) 40%);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--primary) 25%, transparent);
}

/* =========================
   3) TABLAS (TablaCompras)
   ========================= */

.table{
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  overflow: hidden;
  border: 1px solid var(--border);
  border-radius: 12px;
}
.table thead th{
  text-align: left;
  font-weight: 600;
  font-size: .92rem;
  color: var(--muted);
  background: color-mix(in srgb, var(--surface) 92%, var(--ink) 8%);
  padding: 10px 12px;
  border-bottom: 1px solid var(--border);
}
.table tbody td{
  padding: 10px 12px;
  border-bottom: 1px solid var(--border);
}
.table tbody tr:hover{
  background: color-mix(in srgb, var(--surface) 88%, var(--ink) 12%);
}
.table tbody tr:last-child td{
  border-bottom: none;
}

/* Badges */
.badge{
  display: inline-block;
  padding: 4px 8px;
  border-radius: 999px;
  font-size: .78rem;
  border: 1px solid var(--border);
  background: color-mix(in srgb, var(--surface) 92%, var(--ink) 8%);
}
.badge.success{ border-color: color-mix(in srgb, var(--success) 55%, var(--border) 45%); }
.badge.warn{ border-color: color-mix(in srgb, var(--warning) 55%, var(--border) 45%); }
.badge.danger{ border-color: color-mix(in srgb, var(--danger) 55%, var(--border) 45%); }

/* =========================
   4) RESPONSIVE
   ========================= */
@media (max-width: 980px){
  .form-item{ grid-template-columns: 1fr; }
}
@media (max-width: 720px){
  .form-grid{ grid-template-columns: 1fr; }
  .form-item{ grid-column: 1 / -1; }
}

/* =========================
   5) ANIMACIONES SUTILES
   ========================= */
#compras-form, #compras-tabla{
  opacity: 1; transform: translateY(0);
  will-change: transform, opacity;
}
#compras-form[hidden], #compras-tabla[hidden]{ display: none; }
