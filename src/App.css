/* ==========================================================================
   1) BASE / LAYOUT
   ========================================================================== */

html, body{
  block-size:100%;
  overflow:hidden;
  background: var(--page-bg);
  color: var(--ink);
  font-synthesis-weight: none;
}

.layout{
  min-height:90dvh;
  background: var(--page-bg);
  overflow:hidden;
}

.layout--withSidebar{
  display:grid;
  grid-template-columns: var(--sb-w, var(--sb-w-open)) minmax(0,1fr);
  grid-template-areas:"sidebar content";
  gap:16px;
  /* padding removido y gestionado por content/page-viewport */
  min-height:90dvh;
  align-items:stretch;
  transition:grid-template-columns .22s ease;
}
.layout--withSidebar.is-collapsed{ --sb-w: var(--sb-w-closed); }

.content--withSidebar{
  grid-area:content;
  display:grid;
  place-items:stretch;
  min-width:0; min-height:0;
  overflow:hidden;
  padding-inline: var(--page-pad);    /* gutters */
  box-sizing: border-box;
}

.page-viewport{
  width: min(100%, var(--page-max));
  min-height: calc(90dvh - 32px);
  display:grid;
  place-items:stretch;
  min-width:0;
  padding: 20px 0;                    /* top/bottom */
  padding-inline: var(--page-pad);    /* gutters */
  overflow:auto;
  background: transparent;
  margin-inline: auto;                /* centrado */
  box-sizing: border-box;
}

/* 0) Gutter global reutilizable */
:root{
  --page-pad: clamp(14px, 2.4vw, 28px);
  --page-max: 1920px;
}

/* 1) Si tu layout principal es el grid con sidebar (.msb-layout) */
.msb-layout{ gap: var(--gap, 14px); }

/* 1.a) Padding solo a la columna de contenido (2da columna) */
.msb-layout > *:last-child{
  padding-inline: var(--page-pad);
  width: min(100%, var(--page-max));
  margin-inline: auto;
  box-sizing: border-box;
}

/* 2) Páginas/sections sueltas */
.page,
.dashboard-page,
.pz-page,
.detalle-ticket-page{
  padding-inline: var(--page-pad);
  width: min(100%, var(--page-max));
  margin-inline: auto;
  box-sizing: border-box;
}

/* 3) Header/toolbar alineado al container */
.header-inner{
  width: min(100%, var(--page-max));
  padding-inline: var(--page-pad);
  margin-inline: auto;
  box-sizing: border-box;
}

/* 4) Evita que algún wrapper anule los gutters */
.app-content, main{
  width: 100%;
  box-sizing: border-box;
}

/* 5) En pantallas pequeñas no quites gutters */
@media (max-width: 720px){
  :root{ --page-pad: clamp(10px, 4vw, 16px); }
}

/* ==========================================================================
   2) SIDEBAR
   ========================================================================== */
.sidebar{
  grid-area:sidebar;
  display:flex; flex-direction:column;
  background:var(--sb-bg); color:var(--sb-text);
  border-radius:var(--radius-3xl);
  box-shadow:var(--sb-shadow);
  padding:14px 14px 8px;
  position:sticky; top: var(--page-pad);
  margin-block-end: var(--page-pad);
  height: auto;
  margin-top: 10px;
}

.sidebar__header{
  display:grid; grid-template-columns:1fr auto;
  gap:8px; align-items:center;
  padding:8px 10px 14px 10px;
  font-weight:700; letter-spacing:.3px;
}

.sb-brand{ display:flex; align-items:center; gap:8px; min-width:0; }
.sb-logo{ font-size:18px; }
.sb-title{ white-space:nowrap; overflow:hidden; text-overflow:ellipsis; color:var(--sb-text); }

.sidebar__nav{
  overflow:auto; padding:4px; flex:1;
  scrollbar-width:thin; scrollbar-color:var(--sb-hover) transparent;
}
.sidebar__nav::-webkit-scrollbar{ width:8px; }
.sidebar__nav::-webkit-scrollbar-thumb{ background:var(--sb-hover); border-radius:999px; }

.sb-ul{ list-style:none; margin:0; padding:0; }
.sb-li + .sb-li{ margin-top:2px; }

.sideItem{
  width:100%;
  display:flex; align-items:center; gap:10px;
  padding:12px 12px;
  border:0; background:transparent; color:var(--sb-text);
  border-radius:14px; cursor:pointer;
  transition:background .2s ease, transform .04s ease;
  text-align:left;
}
.sideItem:hover{ background:var(--sb-hover); }
.sideItem:active{ transform:translateY(1px); }
.sideItem--active{ background:var(--sb-pill); outline:2px solid rgba(255,255,255,.08); }
.sideItem__icon{ width:22px; display:inline-flex; justify-content:center; opacity:.94; }
.sideItem__label{ font-size:15px; }
.caret{ margin-right:6px; opacity:.85; transition:transform .2s ease; }
.caret.rot{ transform:rotate(90deg); }

.sidebar__footer{
  background:rgba(255,255,255,.08);
  border-radius:14px;
  padding:10px 12px;
  display:flex; align-items:center; gap:10px;
  color:var(--sb-muted); margin-bottom:10px;
}
.sb-prof__avatar{
  width:28px; height:28px; border-radius:999px;
  background:var(--sb-bg-2); color:white; display:grid; place-items:center; font-weight:800;
}
.sb-prof__info{ display:grid; }
.sb-prof__mail{ font-size:12px; opacity:.95; }

.sb-toggle{
  border:0; background:var(--sb-pill); color:var(--sb-text);
  padding:8px 10px; border-radius:10px; cursor:pointer;
  box-shadow:var(--sb-shadow);
}
.layout--withSidebar.is-collapsed .sideItem{ gap:0; padding-inline:10px; justify-content:center; }
.layout--withSidebar.is-collapsed .sb-icon-wrap{ margin-right:0; }
.layout--withSidebar.is-collapsed .sidebar__footer,
.layout--withSidebar.is-collapsed .sb-prof__info,
.layout--withSidebar.is-collapsed .sidebar__header .sb-title,
.layout--withSidebar.is-collapsed .sideItem__label,
.layout--withSidebar.is-collapsed .caret{ display:none !important; }

/* ==========================================================================
   3) HEADER / TOOLBAR SUPERIOR
   ========================================================================== */
.headerRow{
  background: linear-gradient(180deg, color-mix(in oklab, var(--surface) 92%, transparent), var(--surface));
  border:1px solid var(--border);
  padding: 12px 16px;
  border-radius: var(--radius);
}
.brand{ display:flex; align-items:center; gap:10px; }
.brand h1{ margin:0; font-size:18px; font-weight:800; color:var(--ink); }

/* ===== Toolbar en flujo normal (no fijo ni sticky) ===== */
.content-toolbar{
  position: static !important;
  top: auto !important;
  left: auto !important;
  right: auto !important;
  width: auto !important;

  display: flex;
  flex-wrap: wrap;
  justify-content: flex-end;
  align-items: center;
  gap: 8px;
  row-gap: 10px;

  background: transparent !important;
  color: var(--sb-text);
  border: 1px solid transparent;

  border-radius: var(--radius);
  padding: 10px 12px;
  height: 45px;
}

/* ==========================================================================
   4) TARJETAS / FORM / BOTONES
   ========================================================================== */
.card{
  background: var(--surface);
  border:1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}
.card--elev{ background: var(--surface-elev); }

input, select, textarea{
  background: var(--field-bg);
  color: var(--ink);
  border:1px solid var(--border);
  border-radius:12px;
}
::placeholder{ color: color-mix(in oklab, var(--muted) 88%, transparent); }

.btn{
  appearance:none; border:1px solid var(--primary);
  background: var(--primary); color: var(--primary-ink);
  padding:10px 14px; border-radius: 999px; font-weight:700;
  box-shadow: 0 0 0 0 rgba(0,0,0,0);
  transition: box-shadow .18s ease, transform .06s ease, filter .15s ease;
}
.btn:hover{ box-shadow: 0 0 0 6px var(--ring); filter: brightness(1.02); }
.btn:active{ transform: translateY(1px); }
.btn[disabled]{ opacity:.6; cursor:not-allowed; }

/* =========================================
   Botón de tema (pill con icono + texto)
   ========================================= */
.theme-btn{
  display: inline-grid;
  grid-auto-flow: column;
  align-items: center;
  gap: 8px;

  height: 40px;
  padding: 0 14px;
  border-radius: 999px;

  background: var(--surface);
  color: var(--ink);
  border: 1px solid var(--border);
  box-shadow: var(--shadow);

  font: inherit;
  font-weight: 700;
  letter-spacing: .2px;
  cursor: pointer;
  user-select: none;

  transition: filter .15s ease, transform .06s ease,
              border-color .16s ease, box-shadow .16s ease, background .16s ease;
}
.theme-btn__icon{
  font-size: 16px;
  line-height: 1;
  display: grid;
  place-items: center;
}
.theme-btn:hover{
  filter: brightness(1.03);
  border-color: color-mix(in oklab, var(--border) 65%, var(--ink) 35%);
  box-shadow: 0 0 0 6px var(--ring);
}
.theme-btn:active{
  transform: translateY(1px);
  filter: brightness(1.01);
}
.theme-btn:focus-visible{
  outline: none;
  box-shadow: 0 0 0 6px var(--ring);
}
.theme-btn[disabled]{
  opacity: .6;
  cursor: not-allowed;
  box-shadow: none;
}
.theme-btn.is-compact{
  height: 34px;
  padding: 0 10px;
  gap: 6px;
  font-weight: 700;
}
.theme-btn.is-compact .theme-btn__icon{ font-size: 14px; }

/* =========================================
   Botón ghost (texto + icono, fondo transparente)
   ========================================= */
.sb-btn{
  display: inline-grid;
  grid-auto-flow: column;
  align-items: center;
  gap: 8px;

  height: 40px;
  padding: 0 12px;
  border-radius: var(--radius);

  font: inherit;
  font-weight: 800;
  letter-spacing: .2px;
  cursor: pointer;
  user-select: none;

  background: transparent;
  color: var(--ink);
  border: 1px solid transparent;
  transition: background .16s ease, color .16s ease, border-color .16s ease,
              transform .06s ease, box-shadow .16s ease, filter .15s ease;
}
.sb-btn svg{ display:block; }

.sb-btn--ghost{
  background: color-mix(in oklab, var(--surface) 8%, transparent);
  border-color: color-mix(in oklab, var(--border) 40%, transparent);
}
.sb-btn--ghost:hover{
  background: color-mix(in oklab, var(--surface) 16%, transparent);
  border-color: color-mix(in oklab, var(--border) 70%, transparent);
  box-shadow: 0 0 0 6px var(--ring);
}
.sb-btn--ghost:active{
  transform: translateY(1px);
  filter: brightness(1.02);
}
.sb-btn--ghost:focus-visible{
  outline: none;
  box-shadow: 0 0 0 6px var(--ring);
}

/* Variantes semánticas */
.sb-btn--primary{
  background: var(--primary);
  color: var(--primary-ink);
  border-color: var(--primary);
  box-shadow: 0 10px 24px color-mix(in oklab, var(--primary) 28%, transparent);
}
.sb-btn--primary:hover{ box-shadow: 0 0 0 6px var(--ring); }
.sb-btn--primary:active{ transform: translateY(1px); }

.sb-btn[disabled],
.sb-btn--ghost[disabled]{
  opacity: .6;
  cursor: not-allowed;
  box-shadow: none;
}
.sb-btn.is-compact{
  height: 34px;
  padding: 0 10px;
  gap: 6px;
}

/* Ajuste responsive de botones */
@media (max-width: 520px){
  .theme-btn, .sb-btn{ height: 36px; padding-inline: 10px; }
}

/* ==========================================================================
   5) TABLAS Y TEXTO
   ========================================================================== */
.table{ width:100%; border-collapse:separate; border-spacing:0; }
.table thead th{
  text-align:left; font-weight:700; color:var(--ink);
  background: var(--surface);
  border-bottom:2px solid var(--border);
  padding:12px;
}
.table tbody td{
  color:var(--ink); padding:12px; border-bottom:1px solid var(--border);
}
.table tbody tr:nth-child(odd){
  background: color-mix(in oklab, var(--surface) 96%, var(--border));
}

/* ==========================================================================
   6) CHARTS (Recharts)
   ========================================================================== */
.recharts-cartesian-grid line{ stroke: var(--chart-grid) !important; }
.recharts-cartesian-axis-tick text{ fill: var(--chart-axis) !important; }
.recharts-legend-item text{ fill: var(--ink) !important; }
.recharts-tooltip-wrapper .recharts-default-tooltip{
  background: var(--chart-tooltip-bg) !important;
  border:1px solid var(--chart-tooltip-bd) !important;
  color: var(--chart-tooltip-ink) !important;
}

/* ==========================================================================
   7) RESPONSIVE
   ========================================================================== */
@media (max-width:960px){
  .layout--withSidebar{
    grid-template-columns:1fr;
    grid-template-rows:auto 1fr;
    grid-template-areas:
      "sidebar"
      "content";
  }
  .sidebar{ position:relative; top:auto; height:auto; margin-block-end: var(--page-pad); }
  .page-viewport{ min-height: calc(100dvh - var(--page-pad)); }
}
@media (max-width:640px){
  .brand h1{ font-size:16px; }
  .theme-btn{ padding:6px 10px; }
}

/* ==========================================================================
   THEME GLOBAL REACT-SELECT  (classNamePrefix="rs")
   (versión más reciente unificada)
   ========================================================================== */
.rs__control{
  --rs-h: 44px;
  min-height: var(--rs-h);
  border-radius: 12px;
  border: 1px solid var(--bd) !important;
  background: var(--panel, var(--field-bg)) !important;
  color: var(--fg, var(--ink)) !important;
  box-shadow: none !important;
  transition: border-color .15s ease, box-shadow .15s ease, background .15s ease, opacity .15s ease;
}
.rs__value-container{ padding: 6px 10px !important; gap: 6px; }
.rs__single-value,
.rs__input-container{ color: var(--fg, var(--ink)) !important; }
.rs__placeholder{ color: color-mix(in oklab, var(--mut, var(--muted)) 80%, transparent) !important; }
.rs__control--is-focused{
  border-color: color-mix(in oklab, var(--pri, var(--primary)) 55%, var(--bd) 45%) !important;
  box-shadow: 0 0 0 4px var(--ring) !important;
}
.rs__indicators{ gap: 4px; }
.rs__indicator{
  color: color-mix(in oklab, var(--fg, var(--ink)) 85%, transparent) !important;
  fill: currentColor !important;
  transition: opacity .15s ease;
}
.rs__indicator-separator{
  background: color-mix(in oklab, var(--bd) 85%, transparent) !important;
}
.rs__clear-indicator:hover,
.rs__dropdown-indicator:hover{ opacity: .85 !important; }

.rs__menu{
  background: var(--surface-elev) !important;
  color: var(--fg, var(--ink)) !important;
  border: 1px solid var(--bd) !important;
  border-radius: var(--r, var(--radius)) !important;
  box-shadow: var(--shadow) !important;
}

/* ==========================================================================
   RESETS ESPECÍFICOS (última versión)
   ========================================================================== */
.msb-layout,
.msb-content,
.dash,
.panel,
.ticket-form,
.tf-grid { box-shadow: none !important; filter: none !important; }

.theme-btn,
.sb-btn,
.sb-btn--ghost { box-shadow: none !important; }

.theme-btn:focus-visible,
.sb-btn:focus-visible{
  box-shadow: none !important;
  outline: 2px solid color-mix(in oklab, var(--ink) 40%, transparent);
  outline-offset: 2px;
}

.tf-submit { box-shadow: none !important; }
.tf-input:focus,
.rtb-box:focus-within,
select.tf-input:focus{
  box-shadow: none !important;
  outline: 2px solid var(--ring);
  outline-offset: 2px;
}
.ql-toolbar,
.rs__control,
.rs__menu { box-shadow: none !important; }

.ticket-form, .cajeros-pos{ --ring: transparent; }

/* ==========================================================================
   PAGINACIÓN
   ========================================================================== */
.pager{
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 14px;
  border-top: 1px solid color-mix(in oklab, var(--bd) 70%, transparent);
  background: color-mix(in oklab, var(--surface-elev) 92%, transparent);
  color: var(--muted);
  flex-wrap: wrap;
}
.flex-spacer{ flex: 1 1 auto; }

.pager-right{
  display: inline-grid;
  grid-auto-flow: column;
  grid-auto-columns: max-content;
  gap: 10px;
  align-items: center;
}
.pager-right > button{
  height: 36px;
  padding: 0 12px;
  border-radius: 10px;
  border: 1px solid color-mix(in oklab, var(--primary) 35%, var(--bd));
  background: color-mix(in oklab, var(--primary) 12%, transparent);
  color: var(--ink);
  font-weight: 700;
  cursor: pointer;
}
.pager-right > button:disabled{ opacity: .55; cursor: not-allowed; }
.pager-right > select{
  height: 36px;
  border-radius: 10px;
  border: 1px solid color-mix(in oklab, var(--bd) 75%, transparent);
  background: var(--field-bg);
  color: var(--ink);
  padding: 0 10px;
}

/* Fuerza que ningún wrapper imponga max-widths */
#root, .app, .page, .content, .container {
  max-width: none !important;
  width: 100% !important;
  margin: 0 !important;
  padding: 0;
  box-sizing: border-box;
}
