/* =========================================================
   TABLA DE TICKETS ‚Äî limpia, responsive y basada en tokens
   (sin colores fijos; todo sale de tus variables globales)
   ========================================================= */

/* --------- Contenedor principal --------- */
.tabla-tickets{
  /* alias a tokens de la app (con fallback suave) */
  --card:      var(--surface, #fff);
  --ink:       var(--ink, #0f172a);
  --muted:     var(--muted, #64748b);
  --bd:        var(--border, #e5e7eb);
  --bd-strong: var(--bd-strong, color-mix(in oklab, var(--bd) 75%, black));
  --shadow:    var(--shadow, 0 10px 30px rgba(0,0,0,.08));
  --radius:    var(--radius, 14px);
  --pad:       clamp(10px, 2vw, 16px);
  --gap:       clamp(10px, 1.8vw, 14px);
  --ring:      var(--ring, color-mix(in oklab, var(--primary, #3b82f6) 25%, transparent));
  --radius: 15px;

  color: var(--ink);
}

/* Si marcas data-force-light, reinterpreta tokens para modo claro */
.tabla-tickets[data-force-light]{
  --card: var(--surface, #fff);
  --ink:  var(--ink, #0f172a);
  --muted:var(--muted, #64748b);
  --bd:   var(--border, #e5e7eb);
}

/* --------- Wrapper tabla (scroll horizontal c√≥modo) --------- */
.tabla-tickets .table-wrap{
  background: var(--card);
  border: 1px solid var(--bd);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  padding: var(--pad);
  overflow-x: auto;              /* üîë no se ‚Äúrompe‚Äù en pantallas estrechas */
  scrollbar-gutter: stable both-edges;
}

/* --------- Filtros superiores --------- */
.tickets-filtros{
  display: grid;
  grid-template-columns: 1.2fr max-content repeat(2, max-content) 1fr;
  align-items: center;
  gap: var(--gap);
  background: color-mix(in oklab, var(--card) 96%, transparent);
  border: 1px solid var(--bd);
  border-radius: var(--radius);
  padding: var(--pad);
  margin-bottom: var(--gap);
  overflow: hidden;
}
.tickets-filtros input[type="text"],
.tickets-filtros input[type="date"],
.tickets-filtros select{
  appearance: none;
  background: color-mix(in oklab, var(--card) 98%, transparent);
  color: var(--ink);
  border: 1px solid var(--bd);
  border-radius: calc(var(--radius) - 6px);
  padding: 10px 12px;
  min-width: 0;
  box-shadow: 0 1px 0 rgba(0,0,0,.02) inset;
}
.tickets-filtros input::placeholder{ color: color-mix(in oklab, var(--muted) 85%, transparent); }
.tickets-filtros span{ color: var(--muted); user-select: none; }

/* enfoque accesible */
.tickets-filtros input:focus,
.tickets-filtros select:focus{
  outline: none;
  border-color: var(--bd-strong);
  box-shadow: 0 0 0 4px var(--ring);
}

/* --------- Tabla --------- */
.tabla-tickets table{
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  table-layout: fixed;         /* celdas estables */
  min-width: 860px;            /* cabe todo sin romper; el wrap hace scroll */
}

/* Cabezera sticky para tablas largas */
.tabla-tickets thead th{
  position: sticky;
  top: 0;
  z-index: 1;
  background: color-mix(in oklab, var(--card) 98%, transparent);
  color: var(--ink);
  text-align: left;
  font-weight: 700;
  letter-spacing: .01em;
  border-bottom: 1px solid var(--bd);
  padding: 12px;
  white-space: nowrap;
}

/* Indicador de ‚Äúclickable‚Äù para columnas ordenables (role="button") */
.tabla-tickets thead th[role="button"]{
  cursor: pointer;
}
.tabla-tickets thead th[role="button"]:hover{
  background: color-mix(in oklab, var(--card) 92%, transparent);
}

/* Filas */
.tabla-tickets tbody td{
  border-bottom: 1px solid var(--bd);
  padding: 12px;
  color: var(--ink);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Zebra + hover */
.tabla-tickets tbody tr:nth-child(odd){
  background: color-mix(in oklab, var(--card) 98%, transparent);
}
.tabla-tickets tbody tr:hover{
  background: color-mix(in oklab, gray 15%, transparent);
}

.tabla-tickets th:nth-child(1), .tc-wrap td:nth-child(1),.tabla-tickets th:nth-child(7), .tc-wrap td:nth-child(7){
  width: 5ch;            /* columnas compactas */
  max-width: 5ch;
}

.tabla-tickets th:nth-child(5), .tc-wrap td:nth-child(5),.tabla-tickets th:nth-child(6), .tc-wrap td:nth-child(6){
  width: 13ch;            /* columnas compactas */
  max-width: 13ch;
  text-align: center;
  align-items: center;
  justify-items: right;
}

/* Clickable rows (accesible) */
.tabla-tickets tbody tr{
  transition: background .15s ease;
}
.tabla-tickets tbody tr:focus-within{
  outline: none;
  background: color-mix(in oklab, var(--card) 88%, transparent);
  box-shadow: 0 0 0 4px var(--ring) inset;
}

/* Columna ‚ÄúEstado‚Äù con circulito */
.estado-circulo{
  display: inline-block;
  width: 14px;
  height: 14px;
  border-radius: 999px;
  border: 1px solid var(--bd);
  vertical-align: middle;
  /* el color de fondo lo pones inline con calcularColorEstado() */
}

/* --------- Paginaci√≥n --------- */
.paginacion{
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: max-content;
  align-items: center;
  gap: 10px;
  margin-top: var(--gap);
  padding-top: var(--gap);
  border-top: 1px solid var(--bd);
  color: var(--muted);
}
.paginacion > span{
  font-weight: 700; color: var(--ink);
}
.paginacion button{
  background: color-mix(in oklab, var(--card) 94%, transparent);
  color: var(--ink);
  border: 1px solid var(--bd);
  border-radius: calc(var(--radius) - 8px);
  padding: 8px 12px;
  font-weight: 600;
}
.paginacion button:hover:enabled{
  background: color-mix(in oklab, var(--card) 88%, transparent);
}
.paginacion button:disabled{
  opacity: .5; cursor: not-allowed;
}
.paginacion select{
  background: color-mix(in oklab, var(--card) 96%, transparent);
  color: var(--ink);
  border: 1px solid var(--bd);
  border-radius: calc(var(--radius) - 8px);
  padding: 6px 10px;
}

/* --------- Estados de la vista (loading / error / vac√≠o) --------- */
.tabla-tickets p{
  margin: 8px 0;
  color: var(--muted);
}
.tabla-tickets p strong{ color: var(--ink); }

/* =========================================================
   RESPONSIVE / ADAPTATIVO
   ========================================================= */

/* 1) Filtros se reacomodan en pantallas medianas */
@container (max-width: 1100px){
  .tickets-filtros{
    grid-template-columns: 1fr 1fr;
    grid-auto-rows: minmax(40px, auto);
  }
  .tickets-filtros span{ display: none; } /* ocultamos el ‚Äú‚Üí‚Äù si no hay espacio */
}

/* 2) Filtros en una sola columna en pantallas estrechas */
@container (max-width: 640px){
  .tickets-filtros{
    grid-template-columns: 1fr;
    gap: 8px;
  }
}

/* 3) Tabla: reduce padding en celdas cuando el viewport es angosto
   (el overflow-x del .table-wrap asegura el scroll horizontal) */
@media (max-width: 720px){
  .tabla-tickets thead th,
  .tabla-tickets tbody td{ padding: 10px 8px; }
}

/* 4) Mejoras de accesibilidad / motion */
@media (prefers-reduced-motion: reduce){
  .tabla-tickets tbody tr{ transition: none; }
}
