/* ==========================================================================
   0) TOKENS / VARIABLES GLOBALES
   ========================================================================== */
:root{
  /* Sidebar */
  --sb-bg:#176d72;
  --sb-bg-2:#1e7e83;
  --sb-pill:rgba(255,255,255,0.12);
  --sb-hover:rgba(255,255,255,0.08);
  --sb-text:#eaf6f6;
  --sb-muted:#bfe4e4;
  --sb-shadow:0 10px 30px rgba(0,0,0,.15);

  /* Superficie general */
  --surface:#0d1117;
  --ink:#e5eef9;
  --muted:#9fb0c7;
  --border:#1f2a36;
  --field-bg:#0f141a;
  --primary:#3b82f6;
  --primary-ink:#fff;
  --ring:rgba(59,130,246,.25);

  /* Layout */
  --page-pad:16px;
  --radius:16px;
  --radius-3xl:28px;

  /* Dimensiones del sidebar */
  --sb-w-open: 280px;
  --sb-w-closed: 72px;
}

/* Fondo de página (opcional) */
.layout{
  min-height: 90dvh;
  background:#8dc2c5;
}

/* ==========================================================================
   1) LAYOUT CON SIDEBAR (GRID) + CONTENIDO
   ========================================================================== */

/* Grid principal */
.layout--withSidebar{
  display:grid;
  grid-template-columns: var(--sb-w, var(--sb-w-open)) minmax(0, 1fr);
  grid-template-areas:"sidebar content";
  gap:16px;

  box-sizing:border-box;
  padding-inline: var(--page-pad);
  padding-block:  var(--page-pad);

  min-height:90dvh;
  align-items:stretch;
  transition:grid-template-columns .22s ease;
}

/* Estado colapsado del sidebar */
.layout--withSidebar.is-collapsed{
  --sb-w: var(--sb-w-closed);
}

/* Área de contenido */
.content--withSidebar{
  grid-area: content;
  display:grid;
  place-items: stretch;
  min-height:0;
  min-width:0;
}

/* Viewport contenedor de páginas */
.page-viewport{
  width:100%;
  min-height: calc(90dvh - 32px);
  display:grid;
  place-items: stretch;
  min-width:0;
  padding:20px;
  overflow: hidden;
}

/* Componente de página */
.page{
  display:grid;
  grid-template-rows:auto 1fr;
  height:auto;
  min-height:90dvh;
  place-items:stretch;

  /* Importante: sin scroll exterior; lo tendrá el formulario */
  overflow:hidden;
}

/* Los hijos directos de .page ocupan todo el panel */
.page > *{
  width:100% !important;
  min-width:0 !important;
  min-height:0 !important;
}
.page > .page-view{
  min-height:0;
  overflow:hidden; /* bloqueamos scroll aquí; lo maneja el form */
}

/* Limpieza de wrappers antiguos que centraban/limitaban */
.content__inner, .center-all{
  width:100% !important;
  max-width:none !important;
  justify-self:stretch !important;
  align-self:stretch !important;
}
.center-all > *{ place-items:center; }

/* Inputs estándar dentro del contenido */
.content--withSidebar input,
.content--withSidebar select,
.content--withSidebar textarea{
  background:#ffffff;
  border:1px solid #e6eef0;
  border-radius:12px;
}

/* ==========================================================================
   2) SIDEBAR (VISUAL, SCROLL Y ESTADOS)
   ========================================================================== */

.sidebar{
  grid-area:sidebar;
  display:flex;
  flex-direction:column;
  background:var(--sb-bg);
  border-radius:var(--radius-3xl);
  box-shadow:var(--sb-shadow);
  color:var(--sb-text);

  padding:14px 14px 8px;

  position:sticky;
  top: var(--page-pad);
  margin-block-end: var(--page-pad);
  justify-self:start;
  height: calc(100dvh - (var(--page-pad) * 2) - var(--page-pad));

  transition: padding .22s ease;
}

/* Header del sidebar */
.sidebar__header{
  display:grid;
  grid-template-columns:1fr auto;
  align-items:center;
  gap:8px;
  font-weight:700;
  letter-spacing:.3px;
  opacity:.9;
  padding:8px 10px 14px 10px;
}

/* Marca */
.sb-brand{ display:flex; align-items:center; gap:8px; min-width:0; }
.sb-logo{ font-size:18px; }
.sb-title{
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  color:var(--sb-text); opacity:.9;
}
.sb-subtitle{
  font-size:12px; line-height:1.25; font-weight:500;
  color:var(--sb-text, #94a3b8); opacity:.8;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}

/* Nav con scroll fino */
.sidebar__nav{
  overflow:auto;
  padding:4px;
  flex:1;
  scrollbar-width:thin;
  scrollbar-color:var(--sb-hover) transparent;
}
.sidebar__nav::-webkit-scrollbar{ width:8px; }
.sidebar__nav::-webkit-scrollbar-thumb{
  background:var(--sb-hover);
  border-radius:999px;
}

/* Lista e ítems */
.sb-ul{ list-style:none; margin:0; padding:0; }
.sb-li + .sb-li{ margin-top:2px; }

.sideItem{
  width:100%;
  display:flex; align-items:center; gap:10px;
  padding:12px 12px;
  border:0; background:transparent; color:var(--sb-text);
  border-radius:14px; cursor:pointer;
  transition:background .2s ease, transform .04s ease;
  text-align:left;
}
.sideItem:hover{ background:var(--sb-hover); }
.sideItem:active{ transform:translateY(1px); }
.sideItem--leaf{ position:relative; }
.sideItem__icon{ width:22px; display:inline-flex; justify-content:center; opacity:.92; }
.sideItem__label{ font-size:15px; }
.sideItem--folder{ font-weight:600; }
.sideItem--active{
  background:var(--sb-pill);
  outline:2px solid rgba(255,255,255,0.08);
}
.caret{ margin-right:6px; opacity:.8; transition:transform .2s ease; }
.caret.rot{ transform:rotate(90deg); }

/* Footer del sidebar (usuario) */
.sidebar__footer{
  background:rgba(255,255,255,0.06);
  border-radius:14px;
  padding:10px 12px;
  display:flex; align-items:center; gap:10px;
  color:var(--sb-muted);
  margin-bottom:10px;
}
.sb-prof__avatar{
  width:28px; height:28px; border-radius:999px;
  background:var(--sb-bg-2); display:grid; place-items:center;
  font-weight:800; color:white;
}
.sb-prof__info{ display:grid; }
.sb-prof__name{ font-weight:700; color:var(--sb-text); font-size:14px; }
.sb-prof__mail{ font-size:12px; opacity:.9; }

/* Iconos compactos */
.sb-icon-wrap{
  display:inline-flex; align-items:center; justify-content:center;
  width:1.75rem; height:1.75rem; margin-right:.5rem; flex-shrink:0;
}
.sb-icon{ width:1.25rem; height:1.25rem; }
.sb-emoji{ font-size:1.1rem; line-height:1; }

/* Sidebar colapsado */
.layout--withSidebar.is-collapsed .sidebar{ padding-left:10px; padding-right:10px; }
.layout--withSidebar.is-collapsed .sideItem{
  gap:0; padding-left:10px; padding-right:10px; justify-content:center;
}
.layout--withSidebar.is-collapsed .sideItem__label,
.layout--withSidebar.is-collapsed .sidebar__header .sb-title,
.layout--withSidebar.is-collapsed .sb-prof__info,
.layout--withSidebar.is-collapsed .caret{ display:none !important; }
.layout--withSidebar.is-collapsed .sb-icon-wrap{ margin-right:0; }
.layout--withSidebar.is-collapsed .sidebar__footer{
  justify-content:center; padding-left:8px; padding-right:8px;
}

/* Botón toggle */
.sb-toggle{
  border:0;
  background:var(--sb-pill);
  color:var(--sb-text);
  padding:8px 10px;
  border-radius:10px;
  cursor:pointer;
  box-shadow:var(--sb-shadow);
  transition: transform .06s ease, background .2s ease;
}
.sb-toggle:hover{ background: var(--sb-hover); }
.sb-toggle:active{ transform: translateY(1px); }

/* ==========================================================================
   3) HEADER (FONDO FULL-BLEED + CONTENIDO CENTRADO)
   ========================================================================== */

.headerRow{
  background: var(--surface);
  border-bottom: 1px solid var(--border);
  padding-block: 12px;
  padding-inline: 16px;
}

.header-inner{
  width: min(100%, var(--content-max, 1200px));
  margin-inline:auto;
  display:grid;
  grid-template-columns:1fr auto;
  align-items:center;
  gap:16px;
  height:20px;
}

/* Marca / título */
.brand{ display:flex; align-items:center; gap:10px; min-width:0; }
.brand h1{
  margin:0; font-size:18px; font-weight:800; line-height:1.1; color:#0d1117;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}

/* Cluster de usuario */
.userCluster{
  display:grid; grid-auto-flow:column; grid-auto-columns:max-content;
  align-items:center; gap:12px;
}
.avatar{
  width:36px; height:36px; border-radius:999px;
  background:var(--field-bg); color:var(--ink);
  border:1px solid var(--border);
  display:grid; place-items:center; font-weight:700;
}
.userInfo{ display:grid; align-content:center; line-height:1.15; }
.userName{ font-weight:700; font-size:14px; color:var(--ink); }
.userMail{ font-size:12px; color:var(--muted); }

/* Botón primario */
.btn-logout{
  appearance:none;
  border:1px solid var(--primary);
  background:var(--primary);
  color:var(--primary-ink);
  padding:8px 12px;
  border-radius: calc(var(--radius) - 8px);
  font-weight:600;
  cursor:pointer;
  transition: transform .06s ease, box-shadow .15s ease, opacity .15s ease;
}
.btn-logout:hover{ box-shadow:0 0 0 4px var(--ring); }
.btn-logout:active{ transform: translateY(1px); }
.btn-logout:disabled, .btn-logout[aria-busy="true"]{
  opacity:.6; cursor:default; box-shadow:none;
}

/* Header sticky opcional */
.headerRow.is-sticky{ position:sticky; top:0; z-index:40; }

/* Compactación final del header */
.headerRow,
.headerRow > .header-inner{
  height:55px !important;
  min-height:30px;
  padding-block:8px;
}
.headerRow .avatar{ width:30px; height:30px; }
.headerRow .btn-logout{ padding:6px 10px; }
.headerRow .brand h1{ font-size:16px; line-height:1.2; }

/* ==========================================================================
   4) RESPONSIVE
   ========================================================================== */
@media (max-width:960px){
  .layout--withSidebar{
    grid-template-columns:1fr;
    grid-template-rows:auto 1fr;
    grid-template-areas:
      "sidebar"
      "content";
  }
  .sidebar{
    position:relative;
    top:auto;
    height:auto;
    margin-block-end: var(--page-pad);
  }
  .page-viewport{ min-height:calc(100dvh - var(--page-pad)); }
}

@media (max-width:640px){
  .headerRow{ padding-block:10px; padding-inline:12px; }
  .header-inner{ grid-template-columns:1fr; gap:8px; }
  .brand h1{ font-size:16px; }
  .btn-logout{ padding:6px 10px; }
}

html, body{
  block-size: 100%;
  overflow: hidden;            /* <- sin scroll exterior */
}