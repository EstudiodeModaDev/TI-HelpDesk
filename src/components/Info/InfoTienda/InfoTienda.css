/* =========================================================
   STORE INFO — buscador + tabla con header sticky
   ========================================================= */
.store-info{
  --pad: clamp(14px, 2vw, 20px);
  --gap: clamp(10px, 1.6vw, 16px);

  background: var(--surface);
  color: var(--ink);
  border: 1px solid var(--bd);
  border-radius: var(--radius-3xl, var(--radius));
  box-shadow: var(--shadow);
  padding: var(--pad);
  container-type: inline-size; /* container queries por ancho real */
}

/* ================= Título ================= */
.store-info > h3{
  margin: 0 0 8px 0;
  color: var(--ink);
  font-weight: 800;
  letter-spacing: -.015em;
}

/* ================= Acciones (buscador + botón) ================= */
.store-actions{
  margin-top: 6px;
}
.store-actions__left{
  display: grid;
  grid-template-columns: 1fr max-content;
  gap: 10px;
  align-items: center;
}

.store-actions input[type="text"]{
  appearance: none;
  width: 100%;
  background: var(--field-bg);
  color: var(--ink);
  border: 1px solid var(--bd);
  border-radius: 12px;
  padding: 12px 14px;
  outline: none;
  transition: border-color .15s ease, box-shadow .15s ease, background .15s ease;
  min-width: 0;
  box-shadow: var(--shadow);
}
.store-actions input::placeholder{
  color: color-mix(in oklab, var(--muted) 85%, transparent);
}
.store-actions input:focus{
  border-color: color-mix(in oklab, var(--primary) 55%, var(--bd) 45%);
  box-shadow: 0 0 0 4px var(--ring);
}

.store-actions button{
  appearance: none;
  border: 1px solid var(--primary);
  background: var(--primary);
  color: var(--primary-ink);
  font-weight: 800;
  padding: 12px 16px;
  border-radius: 12px;
  cursor: pointer;
  box-shadow: var(--shadow);
  transition: transform .06s ease, filter .15s ease, box-shadow .18s ease;
}
.store-actions button:hover{ box-shadow: 0 0 0 6px var(--ring); filter: brightness(1.03); }
.store-actions button:active{ transform: translateY(1px); }
.store-actions button:disabled{ opacity: .6; cursor: not-allowed; }

/* ================= Alertas ================= */
.alert-error{
  border: 1px solid color-mix(in oklab, var(--primary) 40%, var(--bd) 60%);
  background: color-mix(in oklab, var(--field-bg) 92%, transparent);
  color: var(--ink);
  border-radius: 12px;
  padding: 10px 12px;
  box-shadow: var(--shadow);
}

/* ================= Card / Tabla ================= */
.card{
  background: color-mix(in oklab, var(--surface-elev) 96%, transparent);
  border: 1px solid var(--bd);
  border-radius: 16px;
  box-shadow: var(--shadow);
}

.store-scroll{
  overflow: auto;             /* horizontal y vertical si hace falta */
  max-height: min(60vh, 900px);
  scrollbar-width: thin;
  scrollbar-color: color-mix(in oklab, var(--ink) 24%, transparent) transparent;
}
.store-scroll::-webkit-scrollbar{ height: 10px; width: 10px; }
.store-scroll::-webkit-scrollbar-thumb{
  background: color-mix(in oklab, var(--ink) 24%, transparent);
  border-radius: 999px;
}

/* Cabecera sticky */
.store-scroll thead th{
  position: sticky;
  top: 0;
  z-index: 1;
  background: var(--surface);
  color: var(--ink);
  border-bottom: 2px solid var(--bd);
  padding: 10px 12px;
  font-weight: 800;
  text-align: left;
  white-space: nowrap;
}

/* Celdas / filas */
.store-scroll tbody td{
  color: var(--ink);
  border-bottom: 1px solid var(--bd);
  padding: 10px 12px;
  vertical-align: top;
}
.store-scroll tbody tr:nth-child(odd){
  background: color-mix(in oklab, var(--surface) 96%, var(--bd));
}
.store-scroll tbody tr:hover{
  background: color-mix(in oklab, var(--field-bg) 90%, transparent);
}

/* Evita desborde por textos largos */
.store-scroll td, .store-scroll th{
  max-width: 480px;
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}

/* Fuerza ancho mínimo de la tabla para no comprimir columnas demasiado */
.store-scroll table{
  min-width: 960px; /* ajusta si tu dataset necesita más ancho */
}

/* ================= Responsive (container) ================= */
@container (max-width: 840px){
  .store-actions__left{ grid-template-columns: 1fr; }
  .store-actions button{ width: 100%; }
}
@container (max-width: 520px){
  .store-info{ --pad: 12px; }
  .store-scroll table{ min-width: 720px; }
  .store-scroll thead th, .store-scroll tbody td{ padding: 8px 10px; }
}

/* Accesibilidad: reduce animaciones */
@media (prefers-reduced-motion: reduce){
  .store-actions input,
  .store-actions button{ transition: none; }
}

/* ===== Parche anti-montaje para StoreInfo ===== */

/* Aísla el panel: nada de hijos sobre el título */
.store-info{
  position: relative;
  isolation: isolate;            /* bloquea overlays externos */
}

/* Asegura que el título queda por encima del contenido scroll */
.store-info > h3{
  position: relative;
  z-index: 2;
}

/* La “card” es el plano del contenido; recorta cualquier overlay */
.card{
  position: relative;
  z-index: 1;
  overflow: hidden;               /* evita que asome el scrollbar/overlay en esquinas */
  border-radius: 16px;            /* respeta tu radio */
}

/* El área con scroll queda debajo del título y dentro de la card */
.store-scroll{
  position: relative;
  z-index: 1;
  padding-top: 2px;               /* separa visualmente header/scrollbar del borde superior */
  scrollbar-gutter: stable both-edges; /* reserva gutter y evita solape */
}

/* Header sticky garantizado por encima de filas */
.store-scroll thead th{
  position: sticky;
  top: 0;
  z-index: 3;                     /* sobre filas y sobre el scrollbar interno */
  background: var(--surface);     /* sin transparencias que “dejen ver” debajo */
}

/* Suaviza y reduce el alto del scrollbar para que no “salte” */
.store-scroll::-webkit-scrollbar{ height: 8px; }
